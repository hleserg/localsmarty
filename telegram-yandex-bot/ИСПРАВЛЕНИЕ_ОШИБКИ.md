# ‚úÖ –û—à–∏–±–∫–∞ —Å timezone –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:
```
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞: Only timezones from the pytz library are supported
```

## üîß –†–µ—à–µ–Ω–∏–µ:

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–¥ –≤ `src/services/iam_token_manager.py`:

**–ë—ã–ª–æ:**
```python
from datetime import datetime, timedelta, timezone
# ...
expires_at = datetime.fromisoformat(expires_at_str.replace("Z", "+00:00")).astimezone(timezone.utc)
now = datetime.now(timezone.utc)
```

**–°—Ç–∞–ª–æ:**
```python
from datetime import datetime, timedelta
import pytz
# ...
expires_at = datetime.fromisoformat(expires_at_str.replace("Z", "+00:00")).astimezone(pytz.UTC)
now = datetime.now(pytz.UTC)
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω `requirements.txt`:
```
pytz==2025.2
```

### 3. –°–æ–∑–¥–∞–Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–æ—Ç–∞:
- `run_bot_fixed.py` - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ —Å timezone

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –±–æ—Ç –∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ:
```
üîß –ó–∞–ø—É—Å–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ Telegram –±–æ—Ç–∞
üìù –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Å timezone –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
üìÅ –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ logs/
```

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π:** 5
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** 3
- **–¢–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:** 2
- **–ì–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:** 1
- **–ö–æ–º–∞–Ω–¥:** 2
- **–û—à–∏–±–æ–∫ —Å timezone:** 0 ‚úÖ

### üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```
[2025-09-14 04:18:23] CHAT:100000001 USER:200000001 (@user1) TYPE:COMMAND ID:1 CONTENT:/start
[2025-09-14 04:18:24] CHAT:100000001 USER:200000001 (@user1) TYPE:TEXT ID:2 CONTENT:–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?
[2025-09-14 04:18:27] CHAT:100000003 USER:200000003 (@user3) TYPE:VOICE ID:4 CONTENT:Voice message, duration: 2s, file_id: voice_001
```

## üéØ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é:

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è:
```bash
python run_bot_fixed.py
```

### 2. –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:
1. –ò—Å–ø—Ä–∞–≤—å—Ç–µ `src/services/iam_token_manager.py` (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ pytz: `pip install pytz`
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env` —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `python run_local.py`

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

- ‚úÖ `run_bot_fixed.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–æ—Ç–∞
- ‚úÖ `src/services/iam_token_manager.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–¥ timezone
- ‚úÖ `requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω pytz
- ‚úÖ `logs/messages.log` - –ª–æ–≥–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üéä **–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê!**

‚úÖ **–û—à–∏–±–∫–∞ —Å timezone –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞**  
‚úÖ **–ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫**  
‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**  
‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã**  

–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! üöÄ
